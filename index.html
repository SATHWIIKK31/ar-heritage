<!DOCTYPE html>
<html>
<head>
  <title>Markerless AR Heritage</title>
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
</head>

<body style="margin:0; overflow:hidden;">
  <a-scene 
    embedded
    xrweb="requiredFeatures: hit-test"
    vr-mode-ui="enabled: false"
    renderer="antialias: true"
    background="color: #ECECEC">

    <a-entity id="cameraRig">
      <a-camera id="camera" position="0 1.6 0" look-controls></a-camera>
    </a-entity>

    <!-- 3D model entity -->
    <a-entity id="model"
              visible="false"
              scale="1 1 1">
    </a-entity>

  </a-scene>

  <!-- Controls -->
  <div style="position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%);
              background: rgba(255,255,255,0.9); padding: 10px; border-radius: 12px;
              display: flex; flex-wrap: wrap; gap: 5px; justify-content: center;">
    
    <!-- Monument buttons -->
    <button onclick="loadModel('taj_mahal.glb')">Taj Mahal</button>
    <button onclick="loadModel('charminar.glb')">Charminar</button>
    <button onclick="loadModel('india_gate.glb')">India Gate</button>
    <button onclick="loadModel('ellora_caves.glb')">Ellora Caves</button>
    <button onclick="loadModel('red_fort.glb')">Red Fort</button>

    <!-- Scale controls -->
    <button onclick="scaleUp()">+</button>
    <button onclick="scaleDown()">-</button>
  </div>

  <script>
    const model = document.getElementById("model");
    let currentScale = 1;
    let currentModel = "taj_mahal.glb";

    // Load initial model
    model.setAttribute('gltf-model', 'url(assets/models/' + currentModel + ')');

    function loadModel(file) {
      currentModel = file;
      model.setAttribute('gltf-model', 'url(assets/models/' + currentModel + ')');
      currentScale = 1;
      model.setAttribute('scale', {x: currentScale, y: currentScale, z: currentScale});
      model.setAttribute('visible', false); // wait for user to tap surface
    }

    function scaleUp() {
      currentScale *= 1.2;
      model.setAttribute('scale', {x: currentScale, y: currentScale, z: currentScale});
    }

    function scaleDown() {
      currentScale *= 0.8;
      model.setAttribute('scale', {x: currentScale, y: currentScale, z: currentScale});
    }

    // Place model on tap
    const scene = document.querySelector('a-scene');
    scene.addEventListener('click', () => {
      const camera = document.getElementById('camera');
      const cameraPos = camera.getAttribute('position');
      // Place model 2 meters in front of camera
      model.setAttribute('position', { x: cameraPos.x, y: cameraPos.y - 1, z: cameraPos.z - 2 });
      model.setAttribute('visible', true);
    });
  </script>
</body>
</html>
